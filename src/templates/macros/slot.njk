{% import './card.njk' as card %}

{% macro create(label, emptytext, slotdata) %}

    <div class="slot-section slot-toggled slot-section-{{slotdata.type}}">
        <div class="sheet-row-flex sheet-label-row">
            <div class="sheet-label">{{label}}</div>
            <div class="sheet-sublabel">
                Slots:
                <input type="text" class="sheet-number sheet-shy" name="attr_{{slotdata | getAttr}}" value="{{slotdata.default}}"/>
            </div>
        
        </div>

        
        <div class="slots-list">
            {# Checkbox for determining current number of slots #}
            {% for num in range(1, slotdata.max + 1)%} {# 1 index since player can edit slots #}
                <input type="checkbox" class="sheet-hidden slot-toggle slot-toggle-{{num}}" name="attr_{{slotdata | getAttr}}" value="{{num}}" {{"checked" if num <= slotdata.default}}/>
            {% endfor %}

            {# Slots. CSS shows/hides based on slot number #}
            {% for num in range(1, slotdata.max + 1) %} 
                <div class="slot slot-{{num}}">
                    <div class="slot-content-wrapper">
                        {# Checkbox to determine if we show the empty text or the content #}
                        <input type="checkbox" class="slot-control sheet-hidden" name="attr_{{slotdata.type | attach('', num)}}"/>
                        {# <div class="empty-text">{{emptytext}}</div> #}
                        <div class="slot-content">
                            {{ card.create(num, slotdata.type)}}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

{% endmacro %}


