
{% import 'macros/card.njk' as card %}
{% import 'macros/bubble.njk' as bubble %}
{% import 'macros/slot.njk' as slot %}


<div class="sheet-character">
    <div class="sheet-row-flex">
        <div class="sheet-main">
            <div class="sheet-row-flex">
                {{bubble.create(fields.character.stats.health, 'max')}}
                {{bubble.create(fields.character.stats.stamina, 'max')}}
                {{bubble.create(fields.character.stats.fatigue, 'number')}}
                {{bubble.create(fields.character.stats.ap, 'max')}}
            </div>
            <div class="sheet-row-flex">
                {{bubble.create(fields.character.notes, 'textarea', class='flex-30')}}
                {{bubble.create(fields.character.ability, 'toggleselect', class="flex-60")}}
            </div>

            <div class="action-{{options.card.actions.dodge.id}}"><button type="roll" class="card-roll-btn" value="!!aproll pool=<%{{fields.character.stats.stamina | getAttr}}%> cost=<%{{fields.character.rolloptions.cost | getAttr}}%>  title='Dodge' action='@{character_name} attempts to dodge!' target='<%{{fields.character.combatskills.options.guard | getAttr}}%>' counter='{{fields.character.stats.fatigue | getAttr}}' amountmod='-<%{{fields.character.stats.fatigue | getAttr}}%>'">Dodge</button></div>
            <div class="sheet-equipment-slots">
                {{ slot.create(fields.character.equipmentslots.label, 'Unused Slot', fields.character.equipmentslots) }}
            </div>
        </div>
        <div class="sheet-sidebar">
            {{bubble.create(fields.character.ammo, 'list', class="extra-bottom")}}
            {{bubble.create(fields.character.combatskills, 'list', class="extra-bottom")}}
            {{bubble.create(fields.character.skills, 'list', class="extra-bottom")}}
        </div>
    </div>

    {% include "./sections/inventory.njk" %}
    <div class="sheet-bottom">
        {% include "./sections/roll-widget.njk" %}
    </div>
</div>

{% include "./rolltemplates/zroll.njk" %}

{# Sheet workers are injected here via Gulp process #}
<script type="text/worker">
    /** inject:workers **/
    /** endinject **/
</script>



